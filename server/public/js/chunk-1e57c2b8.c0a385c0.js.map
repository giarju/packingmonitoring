{"version":3,"sources":["webpack:///./src/views/Weighing.vue?ab54","webpack:///src/views/Weighing.vue","webpack:///./src/views/Weighing.vue?5ada","webpack:///./src/views/Weighing.vue","webpack:///./node_modules/core-js/modules/es.array.find-index.js","webpack:///./src/views/Weighing.vue?a20b"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","dd_event","_l","code","key","po_code","$event","dd_item_click","_v","_s","model","value","callback","$$v","qr_alert","expression","table_items","current_row","_e","batch","feed_code","material","class","weigh_inactive","po_exist","weigh_success","target_weight","toFixed","tolerance","weight","weight_click","material_filter","material_total_rows","material_per_page","material_filt_on","material_fields","rowClass","scopedSlots","_u","fn","row","item","actual_weight","action_click","index","save_alert","save_click","staticRenderFns","components","data","timer","stable_time","current_id","form_qr","istableloaded","po_items","mounted","setInterval","methods","hide_modal","$refs","hide","id","Math","floor","val","idx","margin_check","null_check","timeout","console","log","res","error","err","length","onDecode","type","onSubmit","event","preventDefault","sockets","connect","disconnect","newdata","component","$","$findIndex","findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","Array","target","proto","forced","callbackfn","arguments","undefined"],"mappings":"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","file":"js/chunk-1e57c2b8.c0a385c0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"container\",attrs:{\"id\":\"po_selection\"}},[_c('div',{staticClass:\"row\"},[_c('b-dropdown',{staticClass:\"mt-2\",attrs:{\"text\":\"Pilih Nomor Order\",\"variant\":\"dark\",\"menu-class\":\"w-100\"},on:{\"show\":_vm.dd_event}},_vm._l((_vm.po_items),function(code){return _c('b-dropdown-item',{key:code.po_code,on:{\"click\":function($event){return _vm.dd_item_click(code.po_code)}}},[_vm._v(\" \"+_vm._s(code.po_code)+\" \")])}),1)],1),_c('b-alert',{staticClass:\"mt-2 container\",attrs:{\"dismissible\":\"\",\"variant\":\"danger\"},model:{value:(_vm.qr_alert),callback:function ($$v) {_vm.qr_alert=$$v},expression:\"qr_alert\"}},[_vm._v(\" Belum ada PO! \")])],1),_c('div',{staticClass:\"container\",attrs:{\"id\":\"description\"}},[_c('div',{staticClass:\"row pt-2\"},[_c('div',{staticClass:\"col\"},[(_vm.istableloaded)?_c('p',[_vm._v(\"Material : \"+_vm._s(_vm.table_items[_vm.current_row].po_code))]):_vm._e()]),_c('div',{staticClass:\"col\"},[(_vm.istableloaded)?_c('p',[_vm._v(\"Batch : \"+_vm._s(_vm.table_items[_vm.current_row].batch))]):_vm._e()])]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"},[(_vm.istableloaded)?_c('p',[_vm._v(\"Kode Feed : \"+_vm._s(_vm.table_items[_vm.current_row].feed_code))]):_vm._e()]),_c('div',{staticClass:\"col\"},[(_vm.istableloaded)?_c('p',[_vm._v(\"Material : \"+_vm._s(_vm.table_items[_vm.current_row].material))]):_vm._e()])])]),_c('div',{class:[\n      _vm.weigh_inactive || !_vm.po_exist\n        ? 'bg-secondary'\n        : _vm.weigh_success\n        ? 'bg-success'\n        : 'bg-danger',\n      'container',\n      'text-white',\n      'text-center' ],attrs:{\"id\":\"weight\"}},[_c('div',{staticClass:\"row pt-2 pb-3\"},[_c('div',{staticClass:\"col\"},[(_vm.istableloaded)?_c('h1',[_vm._v(\"Material : \"+_vm._s(_vm.table_items[_vm.current_row].material))]):_vm._e()]),_c('div',{staticClass:\"col\"},[(_vm.istableloaded)?_c('h1',[_vm._v(\"Target : \"+_vm._s(_vm.table_items[_vm.current_row].target_weight.toFixed(2))+\" +/- \"+_vm._s(_vm.table_items[_vm.current_row].tolerance.toFixed(2))+\" Kg\")]):_vm._e()])]),_c('div',{staticClass:\"row p-4\"},[_c('div',{staticClass:\"col\"},[_c('h1',{staticClass:\"display-1\"},[_c('strong',[_vm._v(_vm._s(_vm.weight.toFixed(2))+\" Kg\")])])])]),_c('div',{staticClass:\"row p-3\"},[_c('div',{staticClass:\"col\"},[_c('b-button',{attrs:{\"variant\":\"light\"},on:{\"click\":function($event){return _vm.weight_click()}}},[_vm._v(\"Lanjut\")])],1)])]),_c('div',{staticClass:\"container\"},[_c('b-row',{staticClass:\" mt-2\"},[_c('b-col',[_c('h6',[_vm._v(\"Batch : \"+_vm._s(_vm.material_filter))])]),_c('b-col',[_c('b-pagination',{attrs:{\"total-rows\":_vm.material_total_rows,\"per-page\":_vm.material_per_page,\"align\":\"fill\",\"size\":\"sm\"},model:{value:(_vm.material_filter),callback:function ($$v) {_vm.material_filter=$$v},expression:\"material_filter\"}})],1)],1)],1),(_vm.istableloaded)?_c('div',{staticClass:\"container mt-3 scrollable\",attrs:{\"id\":\"list-material\"}},[_c('b-table',{attrs:{\"hover\":\"\",\"fixed\":\"\",\"filter-included-fields\":_vm.material_filt_on,\"filter\":(\"\" + _vm.material_filter),\"fields\":_vm.material_fields,\"items\":_vm.table_items,\"tbody-tr-class\":_vm.rowClass,\"head-variant\":\"dark\"},scopedSlots:_vm._u([{key:\"cell(action)\",fn:function(row){return [_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"primary\"},on:{\"click\":function($event){row.item.actual_weight = _vm.action_click(row.item.actual_weight, row.index)}}},[_vm._v(\" Ubah \")])]}}],null,false,3887289221)})],1):_vm._e(),_c('div',{staticClass:\"container mt-2\"},[_c('div',{staticClass:\"row\"},[_c('b-alert',{staticClass:\"mt-2 container\",attrs:{\"dismissible\":\"\",\"variant\":\"danger\"},model:{value:(_vm.save_alert),callback:function ($$v) {_vm.save_alert=$$v},expression:\"save_alert\"}},[_vm._v(\" Berat masih salah! \")]),(true)?_c('b-button',{attrs:{\"variant\":\"dark\"},on:{\"click\":function($event){return _vm.save_click()}}},[_vm._v(\" Simpan \")]):_vm._e()],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"container\" id=\"po_selection\">\n      <div class=\"row\">\n        <b-dropdown\n          text=\"Pilih Nomor Order\"\n          variant=\"dark\"\n          class=\"mt-2\"\n          menu-class=\"w-100\"\n          @show=\"dd_event\"\n        >\n          <b-dropdown-item \n            v-for=\"code in po_items\" \n            :key=\"code.po_code\" \n            @click=\"dd_item_click(code.po_code)\"\n          >\n            {{code.po_code}}\n          </b-dropdown-item>\n        </b-dropdown>\n        <!-- <b-button v-b-modal.qrscan-modal variant=\"dark\"> Scan QR </b-button> -->\n      </div>\n      <b-alert class=\"mt-2 container\" v-model=\"qr_alert\" dismissible variant=\"danger\">\n        Belum ada PO!\n      </b-alert>\n      <!-- <b-modal\n        ref=\"qrscan-modal-ref\"\n        centered\n        hide-header\n        hide-footer\n        id=\"qrscan-modal\"\n      >\n        Scan QR Code\n        <qrcode-stream @decode=\"onDecode\" @init=\"onInit\"></qrcode-stream>\n        <b-form class=\"container my-2\" >\n          <b-row>\n            <b-col>\n              <b-form-input type=\"text\" id=\"text-user\" placeholder=\"Tulis QR Code\" v-model=\"form_qr\"></b-form-input>\n            </b-col>\n            <b-col>\n              <b-button class=\"m-3 \" @click=\"onDecode(form_qr)\" size=\"sm\" variant=\"primary\">Kirim</b-button> \n            </b-col>\n          </b-row>    \n        </b-form>\n        <b-button class=\"mt-3\" variant=\"secondary\" @click=\"hide_modal\"\n          >Tutup\n        </b-button>\n      </b-modal> -->\n    </div>\n    <div class=\"container\" id=\"description\">\n      <div class=\"row pt-2\">\n        <div class=\"col\">\n          <p v-if=\"istableloaded\">Material : {{table_items[current_row].po_code}}</p>\n        </div>\n        <div class=\"col\">\n          <p v-if=\"istableloaded\">Batch : {{table_items[current_row].batch}}</p>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col\">\n          <p v-if=\"istableloaded\">Kode Feed : {{table_items[current_row].feed_code}}</p>\n        </div>\n        <div class=\"col\">\n          <p v-if=\"istableloaded\">Material : {{table_items[current_row].material}}</p>\n        </div>\n      </div>\n    </div>\n    <div\n      :class=\"[\n        weigh_inactive || !po_exist\n          ? 'bg-secondary'\n          : weigh_success\n          ? 'bg-success'\n          : 'bg-danger',\n        'container',\n        'text-white',\n        'text-center',\n      ]\"\n      id=\"weight\"\n    >\n      <div class=\"row pt-2 pb-3\">\n        <div class=\"col\">\n          <h1 v-if=\"istableloaded\">Material : {{table_items[current_row].material}}</h1>\n        </div>\n        <div class=\"col\">\n          <h1 v-if=\"istableloaded\">Target : {{table_items[current_row].target_weight.toFixed(2)}} +/- {{table_items[current_row].tolerance.toFixed(2)}} Kg</h1>\n        </div>\n      </div>\n      <div class=\"row p-4\">\n        <div class=\"col\">\n          <h1 class=\"display-1\"> \n            <strong>{{ weight.toFixed(2) }} Kg</strong> \n          </h1>\n        </div>\n      </div>\n      <div class=\"row p-3\">\n        <div class=\"col\">\n          <b-button @click=\"weight_click()\" variant=\"light\">Lanjut</b-button>\n        </div>\n      </div>\n    </div>\n    <div class=\"container\">\n      <b-row class=\" mt-2\">\n        <b-col>\n        <h6>Batch : {{material_filter}}</h6>\n        </b-col>\n        <b-col>\n          <b-pagination\n            v-model=\"material_filter\"\n            :total-rows=\"material_total_rows\"\n            :per-page=\"material_per_page\"\n            align=\"fill\"\n            size=\"sm\"\n            \n          ></b-pagination>\n        </b-col>\n      </b-row>\n\n    </div>\n    \n    <div class=\"container mt-3 scrollable\" id=\"list-material\" v-if=\"istableloaded\">\n      <b-table\n        hover\n        fixed\n        :filter-included-fields=\"material_filt_on\"\n        :filter=\"`${material_filter}`\"\n        :fields=\"material_fields\"\n        :items=\"table_items\"\n        :tbody-tr-class=\"rowClass\"\n        head-variant=\"dark\"\n      >\n        <template #cell(action)=\"row\">\n          <b-button \n            size=\"sm\" \n            @click=\"row.item.actual_weight = action_click(row.item.actual_weight, row.index)\"\n            variant=\"primary\"\n          >\n            Ubah \n          </b-button>\n        </template>\n      </b-table>\n    </div>\n    <div class=\"container mt-2\">\n      <div class=\"row\">\n        <b-alert class=\"mt-2 container\" v-model=\"save_alert\" dismissible variant=\"danger\">\n          Berat masih salah!\n        </b-alert>\n        <b-button v-if=\"true\" @click=\"save_click()\" variant=\"dark\"> Simpan </b-button>\n      </div>     \n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  components: {},\n  data() {\n    return {\n      timer:0,\n      stable_time:2,\n      weight: 0,\n      current_row:0,\n      current_id:0,\n      qr_alert: false,\n      po_exist:false,\n      save_alert:false,\n      form_qr:'',\n      weigh_inactive: true,\n      weigh_success: false,\n      istableloaded: false,\n      po_items : [],\n      table_items: [],\n      material_total_rows:1,\n      material_per_page:1,\n      material_filter :1,\n      material_filt_on:[\"batch\"],\n      material_fields: [\n        { key: 'material', label: 'Material' },\n        { key: 'target_weight', label: 'Target' },\n        { key: 'actual_weight', label: 'Aktual' },\n        { key: 'action', label: 'Aksi' },\n      ],\n    };\n  },\n  mounted() {\n    setInterval(() => {\n      this.timer = this.timer + 1;\n      if (this.timer > this.stable_time && this.weigh_success && !this.weigh_inactive) {\n        this.weight_click();\n        this.timer = 0;\n        this.weigh_inactive = true;\n      }\n      if (this.weigh_inactive){\n        if (this.weight < 0.5 && this.weight > -0.5){\n          this.weigh_inactive = false;\n        }\n      }\n    }, 1000)\n  },\n  methods: {\n    hide_modal() {\n      this.$refs[\"qrscan-modal-ref\"].hide();\n    },\n    weight_click() {\n      if(!this.weigh_inactive && this.po_exist){\n        this.table_items[this.current_row].actual_weight = this.weight;\n        let row = this.table_items.map((o) => o.actual_weight).findIndex((val) => val === null);\n        if (row !== -1) {\n          this.current_row = row;\n          this.current_id = this.table_items[this.current_row].id;\n        }\n        this.material_filter = Math.floor((this.current_row)/this.material_per_page)+1;\n      }\n    },\n    action_click(val, idx){\n      val=null;\n      this.current_row = idx + (this.material_filter-1)*this.material_per_page; \n      this.current_id = this.table_items[this.current_row].id;\n      \n      // console.log(this.current_row)\n      // console.log(this.current_id)\n      return val\n    },\n    save_click(){\n      this.save_alert = false;\n      let null_check = !this.table_items.map((o) => o.actual_weight).includes(null);\n      let margin_check = !this.table_items.map((o) => Math.abs(o.target_weight - o.actual_weight) < o.tolerance ).includes(false);\n      // console.log(null_check)\n      // console.log(margin_check)\n      if (margin_check && null_check){\n        axios\n        .put(`/api/weigh/update`, \n        {\n          timeout: 5000,\n          data : this.table_items\n        })\n        .then((res) => {\n          console.log(res);\n          this.material_total_rows = 0;\n          this.material_per_page = 0;\n          this.table_items = [];\n          this.weigh_inactive = true;\n          this.istableloaded = false;\n          this.save_alert = false;\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n      }\n      else {\n        this.save_alert = true\n      }\n      \n    },\n    dd_event(){\n      this.po_items=[];\n      axios\n      .get(`/api/weigh/code`, {\n        timeout: 5000,\n      }) \n      .then((res) => {\n        this.qr_alert = false;\n        if (res.data.length > 0) {\n          this.po_items = res.data;\n          console.log(res.data)\n          this.qr_alert = false;\n        } \n        else {\n          this.qr_alert = true;\n          this.po_items=[];\n        }\n      })\n      .catch((err) => {\n        this.qr_alert = true;\n        this.po_items=[];\n        console.error(err);\n      });\n    },\n    dd_item_click(result){\n     axios\n        .get(`/api/weigh?qrcode='${result}'`, {\n          timeout: 5000,\n        })\n        .then((res) => {\n          if (res.data.length > 0) {\n            this.material_total_rows = res.data.length;\n            this.material_per_page = Math.floor(res.data.length/Math.max.apply(Math, res.data.map(function(o) { return o.batch; })));\n            this.table_items = res.data;\n            this.weigh_inactive = false;\n            this.istableloaded = true;\n            this.qr_alert = false;\n            this.po_exist=true;\n            // this.hide_modal();\n            let row = res.data.map((o) => o.actual_weight).findIndex((val) => val === null);\n            if (row !== -1) {\n              this.current_row = row;\n              this.current_id = this.table_items[this.current_row].id;\n            }\n            console.log(this.table_items[this.current_row])\n          } else {\n            this.weigh_inactive = true;\n            this.istableloaded = false;\n            this.qr_alert = true;\n            this.po_exist=false;\n            // this.hide_modal();\n          }\n        })\n        .catch((err) => {\n          this.weigh_inactive = true;\n          this.istableloaded = false;\n          this.qr_alert = true;\n          this.po_exist=false;\n          console.error(err);\n          // this.hide_modal();\n        });\n    },\n    onDecode(result) {\n      axios\n        .get(`/api/weigh?qrcode='${result}'`, {\n          timeout: 5000,\n        })\n        .then((res) => {\n          if (res.data.length > 0) {\n            this.material_total_rows = res.data.length;\n            this.material_per_page = Math.floor(res.data.length/Math.max.apply(Math, res.data.map(function(o) { return o.batch; })));\n            this.table_items = res.data;\n            this.weigh_inactive = false;\n            this.istableloaded = true;\n            this.qr_alert = false;\n            this.hide_modal();\n            let row = res.data.map((o) => o.actual_weight).findIndex((val) => val === null);\n            if (row !== -1) this.current_row = row;\n          } else {\n            this.weigh_inactive = true;\n            this.istableloaded = false;\n            this.qr_alert = true;\n            this.hide_modal();\n          }\n        })\n        .catch((err) => {\n          this.weigh_inactive = true;\n          this.istableloaded = false;\n          this.qr_alert = true;\n          console.error(err);\n          this.hide_modal();\n        });\n    },\n\n    async onInit(promise) {\n      try {\n        await promise;\n      } catch (error) {\n        if (error.name === \"NotAllowedError\") {\n          this.error = \"ERROR: you need to grant camera access permisson\";\n        } else if (error.name === \"NotFoundError\") {\n          this.error = \"ERROR: no camera on this device\";\n        } else if (error.name === \"NotSupportedError\") {\n          this.error = \"ERROR: secure context required (HTTPS, localhost)\";\n        } else if (error.name === \"NotReadableError\") {\n          this.error = \"ERROR: is the camera already in use?\";\n        } else if (error.name === \"OverconstrainedError\") {\n          this.error = \"ERROR: installed cameras are not suitable\";\n        } else if (error.name === \"StreamApiNotSupportedError\") {\n          this.error = \"ERROR: Stream API is not supported in this browser\";\n        }\n      }\n    },\n    rowClass(item, type) {\n      if (!item || type !== 'row') return\n      if (item.target_weight - item.actual_weight < item.tolerance && item.target_weight - item.actual_weight > -item.tolerance) {\n        return 'table-success'\n      }\n      else if (item.id === this.current_id) {\n        return 'table-info'\n      }\n\n    },\n    onSubmit(event) {\n      event.preventDefault();\n    },\n  },\n  sockets: {\n    connect: function () {\n      console.log(\"socket connected\");\n    },\n\n    disconnect: function () {\n      console.log(\"disconnected\");\n    },\n    newdata: function (data) {\n      // if (!this.weigh_inactive){\n        this.weight = data;\n        if (Math.abs(this.table_items[this.current_row].target_weight - this.weight) < this.table_items[this.current_row].tolerance){\n          this.weigh_success = true;\n        } else {\n          this.weigh_success = false;\n        }\n\n        this.timer = 0;\n      // }  \n    },\n  },\n};\n</script>\n\n<style scoped>\ndiv.scrollable {\n  height: 250px;\n  overflow: scroll;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Weighing.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Weighing.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Weighing.vue?vue&type=template&id=49c6e7ba&scoped=true&\"\nimport script from \"./Weighing.vue?vue&type=script&lang=js&\"\nexport * from \"./Weighing.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Weighing.vue?vue&type=style&index=0&id=49c6e7ba&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"49c6e7ba\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Weighing.vue?vue&type=style&index=0&id=49c6e7ba&scoped=true&lang=css&\""],"sourceRoot":""}